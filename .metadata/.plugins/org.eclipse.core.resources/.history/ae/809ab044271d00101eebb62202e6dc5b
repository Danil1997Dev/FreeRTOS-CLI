/*
 * printf_uart.c
 *
 *  Created on: Dec 31, 2024
 *      Author: user
 */
#include "printf_uart.h"
#include "FreeRTOS_CLI.h"

#ifdef H_UART

extern UART_HandleTypeDef H_UART;



void UART_Printf(const char* fmt, ...) {
    char buff[configCOMMAND_INT_MAX_OUTPUT_SIZE];
    __builtin_va_list args;
    __builtin_va_start(args, fmt);
    vsnprintf(buff, sizeof(buff), fmt, args);
    HAL_UART_Transmit(&huart3, (uint8_t*)buff, strlen(buff), HAL_MAX_DELAY);
    memset(buff, (uint32_t)'\0', sizeof(buff));
    __builtin_va_end(args);
}
#endif
